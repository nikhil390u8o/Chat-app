<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h2>Neon Chat Login / Register</h2>
<input id="username" placeholder="Username">
<input id="password" placeholder="Password" type="password">
<br>
<button onclick="register()">Register</button>
<button onclick="login()">Login</button>

<script>
async function register() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const res = await fetch('/register', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({username,password}) });
    const data = await res.json();
    alert(data.status);
}

async function login() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const res = await fetch('/login', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({username,password}) });
    const data = await res.json();
    if(data.status==='ok'){
        localStorage.setItem('token', data.token);
        localStorage.setItem('username', username);
        window.location.href='/chat.html';
    } else alert(data.error);
}
</script>
</body>
</html>
